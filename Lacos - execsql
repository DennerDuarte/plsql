 DECLARE vnMovtos NUMBER; vnCodProduto NUMBER := 1; BEGIN select COUNT() INTO vnMovtos from produto p join estoque_produto ep on p.cod_produto = ep.cod_produto join estoque e on e.cod_estoque = ep.cod_estoque where p.cod_produto = vnCodProduto; DBMS_OUTPUT.PUT_LINE(vnMovtos); END; 
 declare vnCodCliente pedido.cod_cliente%type := 4; vnSoma number := 0; vnCount number := 0; begin for rec_pedidos in (select val_total_pedido from pedido where cod_cliente = vnCodCliente) loop vnCount := vnCount + 1; vnSoma := vnSoma + rec_pedidos.val_total_pedido; end loop; DBMS_OUTPUT.PUT_LINE('Total: ' || vnSoma); DBMS_OUTPUT.PUT_LINE('Qtde: ' || vnCount); DBMS_OUTPUT.PUT_LINE('Média: ' || vnSoma / vnCount); end; 
 declare nomeProduto produto.nom_produto%type; begin for rec_produto in (select * from produto_composto where sta_ativo = 'A') loop SELECT NOM_PRODUTO INTO nomeProduto from produto where cod_produto = rec_produto.cod_produto; DBMS_OUTPUT.PUT_LINE('Id: ' || rec_produto.cod_produto); DBMS_OUTPUT.PUT_LINE('Nome: ' || nomeProduto); DBMS_OUTPUT.PUT_LINE(' '); end loop; end; 
 declare vnCount number; vnCodProduto produto.cod_produto%type := 1; begin select count() into vnCount from movimento_estoque me inner join tipo_movimento_estoque tme on me.cod_tipo_movimento_estoque = tme.cod_tipo_movimento_estoque where cod_produto = vnCodProduto; DBMS_OUTPUT.PUT_LINE('Qtde: ' || vnCount); end; 
 begin for rec_produtos in (select pc.cod_produto, ep.cod_estoque from produto_composto pc left join estoque_produto ep on pc.cod_produto = ep.cod_produto) loop DBMS_OUTPUT.PUT_LINE('Produto: ' || rec_produtos.cod_produto); DBMS_OUTPUT.PUT_LINE('Estoque: ' || rec_produtos.cod_estoque); DBMS_OUTPUT.PUT_LINE(' '); end loop; end; 
 begin for rec_clientes_pedidos in (select c.nom_cliente, p.val_total_pedido from cliente c right join pedido p on p.cod_cliente = c.cod_cliente) loop DBMS_OUTPUT.PUT_LINE('Cliente: ' || rec_clientes_pedidos.nom_cliente); DBMS_OUTPUT.PUT_LINE('Valor pedido: ' || rec_clientes_pedidos.val_total_pedido); DBMS_OUTPUT.PUT_LINE(' '); end loop; end; 
 declare vnMedia number; vcNomeCliente cliente.nom_cliente%type; begin select avg(val_total_pedido), nom_cliente into vnMedia, vcNomeCliente from pedido p join cliente c on p.cod_cliente = c.cod_cliente where p.cod_cliente = 4 group by c.cod_cliente, c.nom_cliente; DBMS_OUTPUT.PUT_LINE('Cliente: ' || vcNomeCliente); DBMS_OUTPUT.PUT_LINE('Média: ' || vnMedia); DBMS_OUTPUT.PUT_LINE(' '); end; 